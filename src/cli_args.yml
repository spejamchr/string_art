name: "string_art"
version: "0.1.0"
about: "Transform an image into string art"
author: "Spencer Christiansen <spencer@lessnoise.sh>"

args:
    - input_filepath:
        value_name: "FILEPATH"
        short: "i"
        long: "input-filepath"
        takes_value: true
        required: true
        help: "Path to the image that will be rendered with strings."
    - output_filepath:
        value_name: "FILEPATH"
        short: "o"
        long: "output-filepath"
        takes_value: true
        help: "Location to save generated string image."
    - pins_filepath:
        value_name: "FILEPATH"
        short: "p"
        long: "pins-filepath"
        takes_value: true
        help: "Location to save image of pin locations."
    - data_filepath:
        value_name: "FILEPATH"
        short: "d"
        long: "data-filepath"
        takes_value: true
        help: >-
            The script will write operation information as a JSON file if this
            filepath is given. The operation information includes argument
            values, starting and ending image scores, pin locations, and a list
            of line segments between pins that form the final image.
    - gif_filepath:
        value_name: "FILEPATH"
        short: "g"
        long: "gif-filepath"
        takes_value: true
        help: "Location to save a gif of the creation process"
    - max_strings:
        value_name: "INTEGER"
        short: "m"
        long: "max-strings"
        takes_value: true
        default_value: "4294967295" # u32::MAX
        help: "The maximum number of strings in the finished work."
    - step_size:
        value_name: "FLOAT"
        short: "s"
        long: "step-size"
        takes_value: true
        default_value: "1"
        help: >-
            Used when calculating a string's antialiasing. Smaller values ->
            finer antialiasing.
    - string_alpha:
        value_name: "FLOAT"
        short: "a"
        long: "string-alpha"
        takes_value: true
        default_value: "1"
        help: >-
            How opaque or thin each string is. `1` is entirely opaque, `0` is
            invisible.
    - pin_count:
        value_name: "INTEGER"
        short: "c"
        long: "pin-count"
        takes_value: true
        default_value: "200"
        help: >-
            How many pins should be used in creating the image (approximately).
    - pin_arrangement:
        value_name: "ARRANGEMENT"
        short: "r"
        long: "pin-arrangement"
        takes_value: true
        possible_values:
            - "perimeter"
            - "grid"
            - "circle"
            - "random"
        default_value: "perimeter"
        help: >-
            Should the pins be arranged on the image's perimeter, or in a grid
            across the entire image, or in the largest possible centered
            circle, or scattered randomly?
    - background_color:
        value_name: "HEX_COLOR"
        short: "b"
        long: "background-color"
        takes_value: true
        default_value: "#000000"
        help: >-
            An RGB color in hex format `#RRGGBB` specifying the color of the
            background.
    - foreground_color:
        value_name: "HEX_COLOR"
        short: "f"
        long: "foreground-color"
        takes_value: true
        multiple: true
        default_value: "#FFFFFF"
        help: >-
            An RGB color in hex format `#RRGGBB` specifying the color of a
            string to use. Can be specified multiple times to specify multiple
            colors of strings.
    - white_on_black:
        long: "white-on-black"
        help: "Draw with white string on a black background"
    - black_on_white:
        long: "black-on-white"
        help: "Draw with black string on a white background"
    - auto_color:
        value_name: "INTEGER"
        long: "auto-color"
        takes_value: true
        help: >-
            Draw with this many automatically chosen foreground colors on an
            automatically chosen background color.

            If --background-color is provided, use that.

            If --foreground-color is provided, use that in addition to this
            many additional automatically chosen foreground colors.
    - verbose:
        short: "v"
        long: "verbose"
        multiple: true
        help: "Output debugging messages."

groups:
    - grayscale:
        args:
            - white_on_black
            - black_on_white
        conflicts_with:
            - foreground_color
            - background_color
